import{_ as fe,g as a,h as Ce,c as d,a as e,b as C,F as w,r as U,d as i,t as s,v as r,i as De,j as u,o as c,S as v}from"./index-AvumaKeu.js";const ye={class:"container my-5"},ke={class:"d-flex flex-column align-items-center gap-3"},Ie={class:"col"},ge={class:"col"},we={class:"col"},Ue={class:"col"},Ee={class:"col"},Ve={class:"col"},Re={key:0,class:"modal-backdrop"},$e={class:"modal-content-custom"},xe={class:"table table-bordered"},Ne=["onClick"],Be=["onClick"],Te={key:0},Ae={key:1,class:"modal-backdrop"},_e={class:"modal-content-custom"},Pe={class:"table table-bordered"},Se=["onClick"],Fe=["onClick"],Ge={key:0},Oe={key:2,class:"modal-backdrop"},Le={class:"modal-content-custom"},he={class:"table table-bordered"},Me=["onClick"],Ze=["onClick"],je={key:0},ze={key:3,class:"modal-backdrop"},He={class:"modal-content-custom"},qe={class:"table table-bordered"},Je=["onClick"],Ke=["onClick"],Qe={key:0},We={key:4,class:"modal-backdrop"},Xe={class:"modal-content-custom"},Ye={class:"table table-bordered"},et=["onClick"],tt={key:5,class:"modal-backdrop"},lt={class:"modal-content-custom"},nt={class:"table table-bordered"},st={__name:"ZonaAdmin",setup(ot){const A=a(!1),E=a([]),b=a({}),y=a(!1),V=a(!1),L=async()=>{const n=await u.get("/usuarios");E.value=n.data},j=()=>{b.value={Nombre:"",Correo:"",Contraseña:"",rol:"cliente"},y.value=!0,V.value=!1},z=n=>{b.value={...n},y.value=!0,V.value=!0},H=async()=>{V.value?await u.put(`/usuarios/${b.value.ID_usuario}`,b.value):await u.post("/usuarios",b.value),y.value=!1,L()},q=async n=>{if((await v.fire({title:"¿Estás seguro?",text:"Esta acción eliminará el usuario permanentemente.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await u.delete(`/usuarios/${n}`),E.value=E.value.filter(l=>l.ID_usuario!==n),v.fire("Eliminado","El usuario ha sido eliminado.","success")}catch{v.fire("Error","No se pudo eliminar el usuario.","error")}},J=()=>{A.value=!1,y.value=!1},_=a(!1),R=a([]),m=a({}),k=a(!1),$=a(!1),h=async()=>{const n=await u.get("/destinos");R.value=n.data},K=()=>{m.value={Nombre:"",Ubicacion:"",Precio:0,Temporada:"",Tipo_experiencia:"",Accesibilidad:"",Seccion_destino:""},k.value=!0,$.value=!1},Q=n=>{m.value={...n},k.value=!0,$.value=!0},W=async()=>{$.value?await u.put(`/destinos/${m.value.ID_destino}`,m.value):await u.post("/destinos",m.value),k.value=!1,h()},X=async n=>{if((await v.fire({title:"¿Estás seguro?",text:"Esta acción eliminará el destino permanentemente.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await u.delete(`/destinos/${n}`),R.value=R.value.filter(l=>l.ID_destino!==n),v.fire("Eliminado","El destino ha sido eliminado.","success")}catch{v.fire("Error","No se pudo eliminar el destino.","error")}},Y=()=>{_.value=!1,k.value=!1},P=a(!1),x=a([]),o=a({}),I=a(!1),N=a(!1),M=async()=>{const n=await u.get("/reservas");x.value=n.data},ee=()=>{o.value={ID_usuario:"",ID_destino:"",ID_vuelo:"",fecha_inicio:"",fecha_fin:"",adultos:1,ninos:0,habitaciones:1,Estado:"pendiente",total:0},I.value=!0,N.value=!1},te=n=>{o.value={...n},I.value=!0,N.value=!0},le=async()=>{N.value?await u.put(`/reservas/${o.value.ID_reserva}`,o.value):await u.post("/reservas",o.value),I.value=!1,M()},ne=async n=>{if((await v.fire({title:"¿Eliminar reserva?",text:"Esta acción es irreversible.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await u.delete(`/reservas/${n}`),x.value=x.value.filter(l=>l.ID_reserva!==n),v.fire("Eliminada","La reserva ha sido eliminada.","success")}catch{v.fire("Error","No se pudo eliminar la reserva.","error")}},se=()=>{P.value=!1,I.value=!1},S=a(!1),B=a([]),p=a({}),g=a(!1),F=a(!1),Z=async()=>{const n=await u.get("/recompensas");B.value=n.data},oe=()=>{p.value={ID_usuario:"",Descuento_aplicado:"",Puntos_necesarios:""},F.value=!1,g.value=!0},ae=async()=>{F.value?await u.put(`/recompensas/${p.value.ID_recompensa}`,p.value):await u.post("/recompensas",p.value),g.value=!1,Z()},ie=n=>{p.value={...n},F.value=!0,g.value=!0},re=async n=>{if((await v.fire({title:"¿Eliminar recompensa?",text:"Esta acción es irreversible.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await u.delete(`/recompensas/${n}`),B.value=B.value.filter(l=>l.ID_recompensa!==n),v.fire("Eliminada","La recompensa ha sido eliminada.","success")}catch{v.fire("Error","No se pudo eliminar la recompensa.","error")}},ue=()=>{S.value=!1,g.value=!1},G=a(!1),T=a([]),de=async()=>{const n=await u.get("/opiniones");T.value=n.data},ce=async n=>{if((await v.fire({title:"¿Eliminar opinión?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await u.delete(`/opiniones/${n}`),T.value=T.value.filter(l=>l.ID_opinion!==n),v.fire("Eliminada","La opinión ha sido eliminada.","success")}catch{v.fire("Error","No se pudo eliminar la opinión.","error")}},me=()=>{G.value=!1},O=a(!1),D=a({usuarios:0,destinos:0,reservas:0,opiniones:0,recompensas:0}),ve=()=>{document.body.classList.toggle("modo-accesible")},be=async()=>{const[n,t,l,f,pe]=await Promise.all([u.get("/usuarios"),u.get("/destinos"),u.get("/reservas"),u.get("/opiniones"),u.get("/recompensas")]);D.value={usuarios:n.data.length,destinos:t.data.length,reservas:l.data.length,opiniones:f.data.length,recompensas:pe.data.length}};return Ce(()=>{L(),h(),M(),Z(),de()}),(n,t)=>(c(),d("div",ye,[t[66]||(t[66]=e("h1",{class:"text-center mb-4 fw-bold"},"Zona Administrador",-1)),e("div",{class:"d-flex justify-content-end mb-3"},[e("button",{onClick:ve,class:"btn btn-outline-light bg-dark"}," ♿ Accesibilidad visual ")]),e("div",ke,[e("div",Ie,[e("button",{class:"btn btn-primary w-100",onClick:t[0]||(t[0]=l=>A.value=!0)}," Gestión de usuarios ")]),e("div",ge,[e("button",{class:"btn btn-primary w-100",onClick:t[1]||(t[1]=l=>_.value=!0)}," Gestión de destinos ")]),e("div",we,[e("button",{class:"btn btn-primary w-100",onClick:t[2]||(t[2]=l=>P.value=!0)}," Gestión de reservas ")]),e("div",Ue,[e("button",{class:"btn btn-primary w-100",onClick:t[3]||(t[3]=l=>S.value=!0)}," Asignación de recompensas ")]),e("div",Ee,[e("button",{class:"btn btn-primary w-100",onClick:t[4]||(t[4]=l=>G.value=!0)}," Visualización de opiniones ")]),e("div",Ve,[e("button",{class:"btn btn-primary w-100",onClick:t[5]||(t[5]=l=>{O.value=!0,be()})},"Estadísticas del sistema")])]),A.value?(c(),d("div",Re,[e("div",$e,[t[37]||(t[37]=e("h3",{class:"mb-3"},"Usuarios",-1)),e("button",{class:"btn btn-success mb-3",onClick:t[6]||(t[6]=l=>j())},"Nuevo Usuario"),e("table",xe,[t[35]||(t[35]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Nombre"),e("th",null,"Correo"),e("th",null,"Rol"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(c(!0),d(w,null,U(E.value,l=>(c(),d("tr",{key:l.ID_usuario},[e("td",null,s(l.ID_usuario),1),e("td",null,s(l.Nombre),1),e("td",null,s(l.Correo),1),e("td",null,s(l.rol),1),e("td",null,[e("button",{class:"btn btn-sm btn-warning me-2",onClick:f=>z(l)},"Editar",8,Ne),e("button",{class:"btn btn-sm btn-danger",onClick:f=>q(l.ID_usuario)},"Eliminar",8,Be)])]))),128))])]),y.value?(c(),d("div",Te,[e("h5",null,s(V.value?"Editar":"Nuevo")+" Usuario",1),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>b.value.Nombre=l),placeholder:"Nombre",class:"form-control mb-2"},null,512),[[r,b.value.Nombre]]),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>b.value.Correo=l),placeholder:"Correo",class:"form-control mb-2"},null,512),[[r,b.value.Correo]]),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>b.value.Contraseña=l),placeholder:"Contraseña",type:"password",class:"form-control mb-2"},null,512),[[r,b.value.Contraseña]]),i(e("select",{"onUpdate:modelValue":t[10]||(t[10]=l=>b.value.rol=l),class:"form-control mb-3"},t[36]||(t[36]=[e("option",{value:"cliente"},"Cliente",-1),e("option",{value:"administrador"},"Administrador",-1)]),512),[[De,b.value.rol]]),e("button",{class:"btn btn-primary",onClick:H},"Guardar")])):C("",!0),e("button",{class:"btn btn-secondary mt-3",onClick:J},"Cerrar")])])):C("",!0),_.value?(c(),d("div",Ae,[e("div",_e,[t[39]||(t[39]=e("h3",{class:"mb-3"},"Destinos",-1)),e("button",{class:"btn btn-success mb-3",onClick:t[11]||(t[11]=l=>K())},"Nuevo Destino"),e("table",Pe,[t[38]||(t[38]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Nombre"),e("th",null,"Ubicación"),e("th",null,"Precio"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(c(!0),d(w,null,U(R.value,l=>(c(),d("tr",{key:l.ID_destino},[e("td",null,s(l.ID_destino),1),e("td",null,s(l.Nombre),1),e("td",null,s(l.Ubicacion),1),e("td",null,s(l.Precio)+" €",1),e("td",null,[e("button",{class:"btn btn-sm btn-warning me-2",onClick:f=>Q(l)},"Editar",8,Se),e("button",{class:"btn btn-sm btn-danger",onClick:f=>X(l.ID_destino)},"Eliminar",8,Fe)])]))),128))])]),k.value?(c(),d("div",Ge,[e("h5",null,s($.value?"Editar":"Nuevo")+" Destino",1),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>m.value.Nombre=l),placeholder:"Nombre",class:"form-control mb-2"},null,512),[[r,m.value.Nombre]]),i(e("input",{"onUpdate:modelValue":t[13]||(t[13]=l=>m.value.Ubicacion=l),placeholder:"Ubicación",class:"form-control mb-2"},null,512),[[r,m.value.Ubicacion]]),i(e("input",{"onUpdate:modelValue":t[14]||(t[14]=l=>m.value.Precio=l),placeholder:"Precio",type:"number",class:"form-control mb-2"},null,512),[[r,m.value.Precio]]),i(e("input",{"onUpdate:modelValue":t[15]||(t[15]=l=>m.value.Temporada=l),placeholder:"Temporada",class:"form-control mb-2"},null,512),[[r,m.value.Temporada]]),i(e("input",{"onUpdate:modelValue":t[16]||(t[16]=l=>m.value.Tipo_experiencia=l),placeholder:"Tipo de experiencia",class:"form-control mb-2"},null,512),[[r,m.value.Tipo_experiencia]]),i(e("input",{"onUpdate:modelValue":t[17]||(t[17]=l=>m.value.Accesibilidad=l),placeholder:"Accesibilidad",class:"form-control mb-2"},null,512),[[r,m.value.Accesibilidad]]),i(e("input",{"onUpdate:modelValue":t[18]||(t[18]=l=>m.value.Seccion_destino=l),placeholder:"Sección",class:"form-control mb-2"},null,512),[[r,m.value.Seccion_destino]]),e("button",{class:"btn btn-primary",onClick:W},"Guardar")])):C("",!0),e("button",{class:"btn btn-secondary mt-3",onClick:Y},"Cerrar")])])):C("",!0),P.value?(c(),d("div",Oe,[e("div",Le,[t[51]||(t[51]=e("h3",{class:"mb-3"},"Reservas",-1)),e("button",{class:"btn btn-success mb-3",onClick:t[19]||(t[19]=l=>ee())},"Nueva Reserva"),e("table",he,[t[40]||(t[40]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Usuario"),e("th",null,"Destino"),e("th",null,"Fecha Inicio"),e("th",null,"Fecha Fin"),e("th",null,"Estado"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(c(!0),d(w,null,U(x.value,l=>(c(),d("tr",{key:l.ID_reserva},[e("td",null,s(l.ID_reserva),1),e("td",null,s(l.ID_usuario),1),e("td",null,s(l.ID_destino),1),e("td",null,s(l.fecha_inicio),1),e("td",null,s(l.fecha_fin),1),e("td",null,s(l.Estado),1),e("td",null,[e("button",{class:"btn btn-sm btn-warning me-2",onClick:f=>te(l)},"Editar",8,Me),e("button",{class:"btn btn-sm btn-danger",onClick:f=>ne(l.ID_reserva)},"Eliminar",8,Ze)])]))),128))])]),I.value?(c(),d("div",je,[e("h5",null,s(N.value?"Editar":"Nueva")+" Reserva",1),t[41]||(t[41]=e("label",null,"ID Usuario",-1)),i(e("input",{"onUpdate:modelValue":t[20]||(t[20]=l=>o.value.ID_usuario=l),type:"number",class:"form-control mb-2"},null,512),[[r,o.value.ID_usuario]]),t[42]||(t[42]=e("label",null,"ID Destino",-1)),i(e("input",{"onUpdate:modelValue":t[21]||(t[21]=l=>o.value.ID_destino=l),type:"number",class:"form-control mb-2"},null,512),[[r,o.value.ID_destino]]),t[43]||(t[43]=e("label",null,"ID Vuelo (opcional)",-1)),i(e("input",{"onUpdate:modelValue":t[22]||(t[22]=l=>o.value.ID_vuelo=l),type:"number",class:"form-control mb-2"},null,512),[[r,o.value.ID_vuelo]]),t[44]||(t[44]=e("label",null,"Fecha Inicio",-1)),i(e("input",{"onUpdate:modelValue":t[23]||(t[23]=l=>o.value.fecha_inicio=l),type:"date",class:"form-control mb-2"},null,512),[[r,o.value.fecha_inicio]]),t[45]||(t[45]=e("label",null,"Fecha Fin",-1)),i(e("input",{"onUpdate:modelValue":t[24]||(t[24]=l=>o.value.fecha_fin=l),type:"date",class:"form-control mb-2"},null,512),[[r,o.value.fecha_fin]]),t[46]||(t[46]=e("label",null,"Adultos",-1)),i(e("input",{"onUpdate:modelValue":t[25]||(t[25]=l=>o.value.adultos=l),type:"number",class:"form-control mb-2"},null,512),[[r,o.value.adultos]]),t[47]||(t[47]=e("label",null,"Niños",-1)),i(e("input",{"onUpdate:modelValue":t[26]||(t[26]=l=>o.value.ninos=l),type:"number",class:"form-control mb-2"},null,512),[[r,o.value.ninos]]),t[48]||(t[48]=e("label",null,"Habitaciones",-1)),i(e("input",{"onUpdate:modelValue":t[27]||(t[27]=l=>o.value.habitaciones=l),type:"number",class:"form-control mb-2"},null,512),[[r,o.value.habitaciones]]),t[49]||(t[49]=e("label",null,"Estado",-1)),i(e("input",{"onUpdate:modelValue":t[28]||(t[28]=l=>o.value.Estado=l),class:"form-control mb-2"},null,512),[[r,o.value.Estado]]),t[50]||(t[50]=e("label",null,"Total (€)",-1)),i(e("input",{"onUpdate:modelValue":t[29]||(t[29]=l=>o.value.total=l),type:"number",class:"form-control mb-3"},null,512),[[r,o.value.total]]),e("button",{class:"btn btn-primary",onClick:le},"Guardar")])):C("",!0),e("button",{class:"btn btn-secondary mt-3",onClick:se},"Cerrar")])])):C("",!0),S.value?(c(),d("div",ze,[e("div",He,[t[57]||(t[57]=e("h3",{class:"mb-3"},"Recompensas asignadas",-1)),e("button",{class:"btn btn-success mb-3",onClick:t[30]||(t[30]=l=>oe())},"Asignar Recompensa"),e("table",qe,[t[52]||(t[52]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"ID Usuario"),e("th",null,"Descuento"),e("th",null,"Puntos"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(c(!0),d(w,null,U(B.value,l=>(c(),d("tr",{key:l.ID_recompensa},[e("td",null,s(l.ID_recompensa),1),e("td",null,s(l.ID_usuario),1),e("td",null,s(l.Descuento_aplicado),1),e("td",null,s(l.Puntos_necesarios),1),e("td",null,[e("button",{class:"btn btn-sm btn-warning me-2",onClick:f=>ie(l)},"Editar",8,Je),e("button",{class:"btn btn-sm btn-danger",onClick:f=>re(l.ID_recompensa)},"Eliminar",8,Ke)])]))),128))])]),g.value?(c(),d("div",Qe,[t[53]||(t[53]=e("h5",null,"Asignar Recompensa",-1)),t[54]||(t[54]=e("label",null,"ID Usuario",-1)),i(e("input",{"onUpdate:modelValue":t[31]||(t[31]=l=>p.value.ID_usuario=l),type:"number",class:"form-control mb-2"},null,512),[[r,p.value.ID_usuario]]),t[55]||(t[55]=e("label",null,"Descuento aplicado",-1)),i(e("input",{"onUpdate:modelValue":t[32]||(t[32]=l=>p.value.Descuento_aplicado=l),class:"form-control mb-2"},null,512),[[r,p.value.Descuento_aplicado]]),t[56]||(t[56]=e("label",null,"Puntos necesarios",-1)),i(e("input",{"onUpdate:modelValue":t[33]||(t[33]=l=>p.value.Puntos_necesarios=l),type:"number",class:"form-control mb-3"},null,512),[[r,p.value.Puntos_necesarios]]),e("button",{class:"btn btn-primary",onClick:ae},"Guardar")])):C("",!0),e("button",{class:"btn btn-secondary mt-3",onClick:ue},"Cerrar")])])):C("",!0),G.value?(c(),d("div",We,[e("div",Xe,[t[59]||(t[59]=e("h3",{class:"mb-3"},"Opiniones de usuarios",-1)),e("table",Ye,[t[58]||(t[58]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"ID Usuario"),e("th",null,"Comentario"),e("th",null,"Puntuación"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(c(!0),d(w,null,U(T.value,l=>(c(),d("tr",{key:l.ID_opinion},[e("td",null,s(l.ID_opinion),1),e("td",null,s(l.ID_usuario),1),e("td",null,s(l.Comentario),1),e("td",null,s(l.Puntuacion),1),e("td",null,[e("button",{class:"btn btn-sm btn-danger",onClick:f=>ce(l.ID_opinion)},"Eliminar",8,et)])]))),128))])]),e("button",{class:"btn btn-secondary mt-3",onClick:me},"Cerrar")])])):C("",!0),O.value?(c(),d("div",tt,[e("div",lt,[t[65]||(t[65]=e("h3",{class:"mb-3"},"Estadísticas del sistema",-1)),e("table",nt,[e("tbody",null,[e("tr",null,[t[60]||(t[60]=e("th",null,"Usuarios registrados",-1)),e("td",null,s(D.value.usuarios),1)]),e("tr",null,[t[61]||(t[61]=e("th",null,"Destinos",-1)),e("td",null,s(D.value.destinos),1)]),e("tr",null,[t[62]||(t[62]=e("th",null,"Reservas",-1)),e("td",null,s(D.value.reservas),1)]),e("tr",null,[t[63]||(t[63]=e("th",null,"Opiniones",-1)),e("td",null,s(D.value.opiniones),1)]),e("tr",null,[t[64]||(t[64]=e("th",null,"Recompensas asignadas",-1)),e("td",null,s(D.value.recompensas),1)])])]),e("button",{class:"btn btn-secondary mt-3",onClick:t[34]||(t[34]=l=>O.value=!1)},"Cerrar")])])):C("",!0)]))}},it=fe(st,[["__scopeId","data-v-bf7ea079"]]);export{it as default};
